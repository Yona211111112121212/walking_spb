name: Basic CI Check

on: [push, pull_request]

jobs:
  check:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Check Project Structure
      run: |
        echo "ğŸ” Checking project structure..."
        
        # Check backend
        if [ -d "Backet" ]; then
          echo "âœ… Backend directory found"
          ls -la Backet/
        else
          echo "âŒ Backet directory not found"
          exit 1
        fi
        
        # Check frontend (optional)
        if [ -d "frontend" ]; then
          echo "âœ… Frontend directory found"
          ls -la frontend/src/
        fi
    
    - name: Install and Test Backend
      run: |
        echo "ğŸ§ª Testing backend..."
        cd Backet
        
        # Just install dependencies to check for errors
        npm install --no-audit --no-fund
        
        # Check if essential files exist and are valid
        if [ -f "server.js" ]; then
          echo "âœ… server.js exists"
          node -c server.js && echo "âœ… server.js syntax valid"
        fi
        
        if [ -f "database.js" ]; then
          node -c database.js && echo "âœ… database.js syntax valid"
        fi
        
        echo "âœ… Backend check completed"
    
    - name: Install and Test Frontend
      if: always()
      run: |
        if [ -d "frontend" ]; then
          echo "ğŸ§ª Testing frontend..."
          cd frontend
          
          npm install --no-audit --no-fund
          
          if [ -f "src/App.js" ]; then
            node -c src/App.js && echo "âœ… App.js syntax valid"
          fi
          
          echo "âœ… Frontend check completed"
        fi